/** 
 * Project Name:blog-manage-web 
 * File Name:MenuController.java 
 * Package Name:com.itaka.blog.manage.controller.menu 
 * Date:2018年7月1日下午5:31:11
 */
package com.itaka.blog.manage.controller.menu;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.servlet.ModelAndView;

import com.github.pagehelper.PageInfo;
import com.itaka.blog.manage.controller.base.BaseController;
import com.itaka.blog.pojo.SysMenu;
import com.itaka.blog.service.MenuService;
import com.itaka.blog.vo.MenuConditionVo;

/** 
 * ClassName: MenuController <br/> 
 * Function: 菜单相关控制器 <br/> 
 * date: 2018年7月1日 下午5:31:11 <br/> 
 * 
 * @author Jerry
 * @version  
 */
@Controller
public class MenuController extends BaseController{

	@Autowired
	private MenuService menuService;

	@PostMapping("/menuList.do")
	public ModelAndView getMenuList(HttpServletRequest request){
		ModelAndView mv = new ModelAndView("system/menu/menu_list");
		try {
			String name = request.getParameter("name");
			String type = request.getParameter("type");
			String status = request.getParameter("status");
			MenuConditionVo conditionVo = new MenuConditionVo();
			conditionVo.setName(name);
			conditionVo.setType(type);
			conditionVo.setStatus(status);
			if (conditionVo.getPageNumber()==0||conditionVo.getPageSize()==0) {
				conditionVo.setPageNumber(Integer.valueOf(DEFAULT_PAGE_NO));
				conditionVo.setPageSize(Integer.valueOf(DEFAULT_PAGE_SIZE));
			}else{
				conditionVo.setPageNumber(conditionVo.getPageNumber());
				conditionVo.setPageSize(conditionVo.getPageSize());
			}
			PageInfo<SysMenu> page = menuService.getMenuList(conditionVo);
			mv.addObject("page", page);
			mv.addObject("menu", conditionVo);
		} catch (Exception e) {
			logger.error(e.getMessage());
		}
		return mv;
	}
}
